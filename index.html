<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paul Trujillo</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
/* Appointment Section */
.appointment-section {
    padding: 80px 50px;
    background-color: #fff7ec;
    text-align: center;
}
.appointment-section h2 {
    font-size: 2.3rem;
    color: #ff4e50;
    margin-bottom: 20px;
}
.appointment-section p {
    max-width: 600px;
    margin: 0 auto 40px;
    color: #555;
}
.appointment-form {
    max-width: 600px;
    margin: auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.appointment-form input,
.appointment-form textarea {
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    font-size: 1rem;
}
.appointment-form button {
    padding: 14px;
    background-color: #ff4e50;
    color: white;
    border: none;
    font-size: 1.1rem;
    border-radius: 25px;
    cursor: pointer;
    transition: 0.3s ease;
}
.appointment-form button:hover {
    background-color: #e64345;
}

/* Footer */
footer { padding: 40px 50px; text-align: center; background-color: #333; color: white; }
footer a { color: #ff4e50; font-weight: bold; margin: 0 10px; }
</style>
</head>
<body>

<!-- Appointment Section -->
<section id="appointment" class="appointment-section">
<h2>Agenda una cita conmigo</h2>
<p>Reserva una llamada de 15 a 30 minutos conmigo para hablar de tu proyecto, negocio o cualquier idea que te gustaría desarrollar.</p>

<form class="appointment-form" id="appointmentForm">
    <input type="text" name="name" placeholder="Tu nombre" required>
    <input type="email" name="email" placeholder="Tu correo" required>
    <input type="datetime-local" name="datetime" required>
    <textarea name="message" placeholder="¿Qué te gustaría platicar?" rows="4"></textarea>
    <button type="submit">Agendar cita</button>
</form>

<script>
const form = document.getElementById("appointmentForm");
form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const start = formData.get("datetime");
    const endDate = new Date(start);
    endDate.setMinutes(endDate.getMinutes() + 30); // Duración de 30 min

    const data = {
        name: formData.get("name"),
        email: formData.get("email"),
        message: formData.get("message"),
        start: new Date(start).toISOString(),
        end: endDate.toISOString()
    };

    try {
        const res = await fetch("https://portfolio-production-1cfa.up.railway.app/create-event", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });
        const result = await res.json();
        if(result.success){
            alert("Cita creada! Revisa tu Google Calendar.");
            form.reset();
        } else {
            alert("Error: " + result.error);
        }
    } catch(err){
        alert("Error al conectar con el backend: " + err);
    }
});
</script>
</section>

<!-- Footer -->
<footer>
<p>
Conéctate conmigo:
<a href="mailto:paul.trujillo.hormigo@gmail.com">Email</a> |
<a href="https://www.linkedin.com/in/paul-trujillo-319482209/">LinkedIn</a> |
<a href="https://www.instagram.com/paultrujilloh">Instagram</a> |
<a href="https://www.instagram.com/senorchilaquilmx/">Señor Chilaquil</a>
</p>
</footer>

</body>
</html>
